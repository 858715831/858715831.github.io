(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{395:function(a,s,t){"use strict";t.r(s);var e=t(4),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"_1-初识docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-初识docker"}},[a._v("#")]),a._v(" 1 初识Docker")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311632237.png",alt:"image-20221117203248677"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311632810.png",alt:"image-20221117203526799"}})]),a._v(" "),s("h2",{attrs:{id:"_1-1-docker概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-docker概念"}},[a._v("#")]),a._v(" 1.1 Docker概念")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311633758.png",alt:"image-20221117203617473"}})]),a._v(" "),s("h2",{attrs:{id:"_1-2-安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装docker"}},[a._v("#")]),a._v(" 1.2 安装Docker")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311633435.png",alt:"img"}})]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 1、yum 包更新到最新 \nyum update\n# 2、安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的 \nyum install -y yum-utils device-mapper-persistent-data lvm2\n# 3、 设置yum源\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n# 4、 安装docker，出现输入的界面都按 y \nyum install -y docker-ce\n# 5、 查看docker版本，验证是否验证成功\ndocker -v\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("p",[a._v("当发生如下报错")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Error: Failed to download metadata for repo 'appstream': Cannot prepare internal mirrorlist: No URLs in mirrorlist\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("依次执行")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /etc/yum.repos.d/\nsed -i 's/mirrorlist/#mirrorlist/g' /etc/yum.repos.d/CentOS-*\nsed -i 's|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*\nyum makecache\nyum update -y\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("安装成功")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311634121.png",alt:"image-20221118203938565"}})]),a._v(" "),s("h2",{attrs:{id:"_1-3-docker架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-docker架构"}},[a._v("#")]),a._v(" 1.3 Docker架构")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311635929.png",alt:"image-20221118204247014"}})]),a._v(" "),s("h2",{attrs:{id:"_1-4-配置docker镜像加速器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-配置docker镜像加速器"}},[a._v("#")]),a._v(" 1.4 配置Docker镜像加速器")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311635922.png",alt:"image-20221118204825959"}})]),a._v(" "),s("p",[a._v("登录阿里云")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311635032.png",alt:"image-20221118205301984"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311635193.png",alt:"image-20221118205500436"}})]),a._v(" "),s("p",[a._v("执行")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311636250.png",alt:"image-20221118205608837"}})]),a._v(" "),s("p",[a._v("查看是否配置成功")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311636506.png",alt:"image-20221118205728239"}})]),a._v(" "),s("h1",{attrs:{id:"_2-docker命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker命令"}},[a._v("#")]),a._v(" 2 Docker命令")]),a._v(" "),s("h2",{attrs:{id:"_2-1-docker进程相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-docker进程相关命令"}},[a._v("#")]),a._v(" 2.1 Docker进程相关命令")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311533452.png",alt:"img"}})]),a._v(" "),s("h3",{attrs:{id:"启动docker服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动docker服务"}},[a._v("#")]),a._v(" 启动docker服务")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"停止docker服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止docker服务"}},[a._v("#")]),a._v(" 停止docker服务")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl stop docker\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"重启docker服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重启docker服务"}},[a._v("#")]),a._v(" 重启docker服务")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl restart docker\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"查看docker服务状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看docker服务状态"}},[a._v("#")]),a._v(" 查看docker服务状态")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl status docker\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"设置开机启动docker服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动docker服务"}},[a._v("#")]),a._v(" 设置开机启动docker服务")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl enable docker\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"_2-2-docker镜像相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-docker镜像相关命令"}},[a._v("#")]),a._v(" 2.2 Docker镜像相关命令")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311534494.png",alt:"img"}})]),a._v(" "),s("h3",{attrs:{id:"查看镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像"}},[a._v("#")]),a._v(" 查看镜像")]),a._v(" "),s("p",[a._v("查看本地所有的镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\ndocker images\ndocker images –q # 查看所用镜像的id\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h3",{attrs:{id:"搜索镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索镜像"}},[a._v("#")]),a._v(" 搜索镜像")]),a._v(" "),s("p",[a._v("从网络中查找需要的镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\ndocker search 镜像名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[a._v("#")]),a._v(" 拉取镜像")]),a._v(" "),s("p",[a._v("从Docker仓库下载镜像到本地，镜像名称格式为 名称:版本号，如果版本号不指定则是最新的版本。 如果不知道镜像版本，可以去docker hub 搜索对应镜像查看。")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\ndocker pull 镜像名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"删除镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像"}},[a._v("#")]),a._v(" 删除镜像")]),a._v(" "),s("p",[a._v("删除本地镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker rmi 镜像id # 删除指定本地镜像\ndocker rmi `docker images -q` # 删除所有本地镜像\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("演示")]),a._v(" "),s("p",[a._v("查看指定镜像版本")]),a._v(" "),s("div",{staticClass:"language-HTTP line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-http"}},[s("code",[s("span",{pre:!0,attrs:{class:"token header"}},[s("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//hub.docker.com")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311539837.png",alt:"image-20221118211729005"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311539342.png",alt:"image-20221118211903298"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311539228.png",alt:"image-20221118212120394"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311540054.png",alt:"image-20221119140320128"}})]),a._v(" "),s("h2",{attrs:{id:"_2-3-docker容器相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-docker容器相关命令"}},[a._v("#")]),a._v(" 2.3 Docker容器相关命令")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311540452.png",alt:"image-20221119140728720"}})]),a._v(" "),s("h3",{attrs:{id:"查看容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看容器"}},[a._v("#")]),a._v(" 查看容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker ps # 查看正在运行的容器 \ndocker ps –a # 查看所有容器\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"创建并启动容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建并启动容器"}},[a._v("#")]),a._v(" 创建并启动容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run 参数\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("参数说明:")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("-i")]),a._v(":保持容器运行。通常与 -t 同时使用。加入it这两个参数后，容器创建后自动进入容器中，退出容器后，容器自动关闭。")]),a._v(" "),s("li",[s("code",[a._v("-t")]),a._v(":为容器重新分配一个伪输入终端，通常与 -i 同时使用。")]),a._v(" "),s("li",[s("code",[a._v("-d")]),a._v(":以守护(后台)模式运行容器。创建一个容器在后台运行，需要使用docker exec 进入容器。退出后，容器不会关闭。")]),a._v(" "),s("li",[s("code",[a._v("-it")]),a._v("创建的容器一般称为交互式容器，-id 创建的容器一般称为守护式容器")]),a._v(" "),s("li",[s("code",[a._v("--name")]),a._v(":为创建的容器命名。")])]),a._v(" "),s("p",[a._v("演示")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311541218.png",alt:"image-20221119142049706"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311541238.png",alt:"image-20221119142219103"}})]),a._v(" "),s("p",[a._v("以后台方式运行容器，并进入容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hecs-33111 ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker run -id --name=c2 redis:5.0 /bin/bash")]),a._v("\n3842cee27f9b97fa7fb512aa53f835351f38860ffd5a4dc0e19b9e36d7aadf54\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hecs-33111 ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker exec -it c2 /bin/bash")]),a._v("\nroot@3842cee27f9b:/data"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311541509.png",alt:"image-20221119142659334"}})]),a._v(" "),s("h3",{attrs:{id:"进入容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入容器"}},[a._v("#")]),a._v(" 进入容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" 参数 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 退出容器，容器不会关闭")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"停止容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[a._v("#")]),a._v(" 停止容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop 容器名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"启动容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[a._v("#")]),a._v(" 启动容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start 容器名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"删除容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[a._v("#")]),a._v(" 删除容器")]),a._v(" "),s("p",[a._v("如果容器是运行状态则删除失败，需要停止容器才能删除")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" 容器名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"查看容器信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看容器信息"}},[a._v("#")]),a._v(" 查看容器信息")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect 容器名称\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("演示")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311542569.png",alt:"image-20221119143241802"}})]),a._v(" "),s("h1",{attrs:{id:"_3-docker容器的数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-docker容器的数据卷"}},[a._v("#")]),a._v(" 3 Docker容器的数据卷")]),a._v(" "),s("h2",{attrs:{id:"_3-1-数据卷的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-数据卷的概念"}},[a._v("#")]),a._v(" 3.1 数据卷的概念")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311547840.png",alt:"image-20221119143512053"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311547263.png",alt:"image-20221119143520561"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311547357.png",alt:"image-20221119143527847"}})]),a._v(" "),s("h2",{attrs:{id:"_3-2-配置数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-配置数据卷"}},[a._v("#")]),a._v(" 3.2 配置数据卷")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". –v 宿主机目录"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("文件"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(":容器内目录"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("文件"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311550416.png",alt:"image-20221119150642838"}})]),a._v(" "),s("p",[a._v("演示")]),a._v(" "),s("p",[a._v("创建centos容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("c3 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/data:/root/data_container centos /bin/bash\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("观察创建的目录")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311551758.png",alt:"image-20221119151234849"}})]),a._v(" "),s("p",[a._v("观察到宿主机创建的数据卷")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311551167.png",alt:"image-20221119151303778"}})]),a._v(" "),s("p",[a._v("在宿主机data目录下创建文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311551047.png",alt:"image-20221119151436997"}})]),a._v(" "),s("p",[a._v("观察容器内的同步情况")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311551563.png",alt:"image-20221119151518008"}})]),a._v(" "),s("p",[a._v("在容器内修改文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311551723.png",alt:"image-20221119151627073"}})]),a._v(" "),s("p",[a._v("观察宿主机内同步情况")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311552684.png",alt:"image-20221119151707877"}})]),a._v(" "),s("p",[a._v("退出并关闭centos容器")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311552231.png",alt:"image-20221119152447918"}})]),a._v(" "),s("p",[a._v("观察宿主机数据卷是否还在")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311552084.png",alt:"image-20221119152537404"}})]),a._v(" "),s("p",[a._v("数据卷未丢失")]),a._v(" "),s("p",[a._v("重启启动容器")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311552404.png",alt:"image-20221119152812943"}})]),a._v(" "),s("p",[a._v("一个容器内同步多个数据卷")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("c2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" ~/data2:/root/data2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" ~/data3:/root/data3 centos\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("容器内")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311553542.png",alt:"image-20221119153548750"}})]),a._v(" "),s("p",[a._v("宿主机")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311553971.png",alt:"image-20221119153605557"}})]),a._v(" "),s("p",[a._v("容器与容器之间的同步")]),a._v(" "),s("p",[a._v("创建两个容器c1,c2")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311553850.png",alt:"image-20221119155040681"}})]),a._v(" "),s("p",[a._v("进入容器c1并创建文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311554282.png",alt:"image-20221119155244415"}})]),a._v(" "),s("p",[a._v("进入容器c2观察同步情况")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311554462.png",alt:"image-20221119155402217"}})]),a._v(" "),s("h2",{attrs:{id:"_3-3-数据卷容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-数据卷容器"}},[a._v("#")]),a._v(" 3.3 数据卷容器")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311554674.png",alt:"image-20221119155535372"}})]),a._v(" "),s("p",[s("strong",[a._v("配置数据卷容器")])]),a._v(" "),s("ol",[s("li",[a._v("创建启动c3数据卷容器，使用 –v 参数 设置数据卷")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run –it "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("c3 –v /volume centos:7 /bin/bash\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ol",[s("li",[a._v("创建启动 c1 c2 容器，使用 –-volumes-from 参数 设置数据卷")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run –it "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("c1 --volumes-from c3 centos:7 /bin/bash \n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run –it "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("c2 --volumes-from c3 centos:7 /bin/bash\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("演示")]),a._v(" "),s("p",[a._v("创建数据卷容器c3和两个测试同步容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hecs-33111 data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker run -id --name=c3 -v /volume centos")]),a._v("\n5a43ebf4f327441ae82f9fdebe640f88125f03e35ddfd34e5a7e21982f39a48c\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hecs-33111 data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker run -id --name=c1 --volumes-from c3 centos")]),a._v("\ne2ceb7739b1f57cd5b76c2c155b23fe5d1dedb29b9b1fc80c6e7ac50f1dd9eaf\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hecs-33111 data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker run -id --name=c2 --volumes-from c3 centos")]),a._v("\nf8cc38cff52549d6be3e3604d679b1556fda4c5ad1641a1cee4bde7fc63da9d4\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("在c1容器内修改数据")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@hecs-33111 data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker exec -it c1 /bin/bash")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@e2ceb7739b1f /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cd volume/")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@e2ceb7739b1f volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ls")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@e2ceb7739b1f volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@e2ceb7739b1f volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# touch test.txt")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@e2ceb7739b1f volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@e2ceb7739b1f volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ls")]),a._v("\ntest.txt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("观察c2容器数据变化,数据已经成功同步")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311555204.png",alt:"image-20221119173008858"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311555180.png",alt:"image-20221119203158768"}})]),a._v(" "),s("h1",{attrs:{id:"_4-docker应用部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker应用部署"}},[a._v("#")]),a._v(" 4 Docker应用部署")]),a._v(" "),s("h2",{attrs:{id:"_4-1-mssql部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-mssql部署"}},[a._v("#")]),a._v(" 4.1 MsSQL部署")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311600775.png",alt:"image-20221119203229479"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311600640.png",alt:"image-20221119203345769"}})]),a._v(" "),s("h3",{attrs:{id:"搜索mysql镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索mysql镜像"}},[a._v("#")]),a._v(" 搜索mysql镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker search mysql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311600280.png",alt:"image-20221119204432501"}})]),a._v(" "),s("h3",{attrs:{id:"拉取mysql镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取mysql镜像"}},[a._v("#")]),a._v(" 拉取mysql镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker pull mysql:5.6\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311601222.png",alt:"image-20221119204625163"}})]),a._v(" "),s("h3",{attrs:{id:"创建容器-设置端口映射、目录映射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建容器-设置端口映射、目录映射"}},[a._v("#")]),a._v(" 创建容器，设置端口映射、目录映射")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\n# 在/root目录下创建mysql目录用于存储mysql数据信息\nmkdir ~/mysql\ncd ~/mysql\nSHELL\ndocker run -id \\\n-p 3307:3306 \\\n--name=c_mysql \\\n-v $PWD/conf:/etc/mysql/conf.d \\\n-v $PWD/logs:/logs \\\n-v $PWD/data:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\nmysql:5.6\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("ul",[s("li",[a._v("参数说明：\n"),s("ul",[s("li",[s("strong",[a._v("-p 3307:3306")]),a._v("：将容器的 3306 端口映射到宿主机的 3307 端口。")]),a._v(" "),s("li",[s("strong",[a._v("-v $PWD/conf:/etc/mysql/conf.d")]),a._v("：将主机当前目录下的 conf/my.cnf 挂载到容器的 /etc/mysql/my.cnf。配置目录")]),a._v(" "),s("li",[s("strong",[a._v("-v $PWD/logs:/logs")]),a._v("：将主机当前目录下的 logs 目录挂载到容器的 /logs。日志目录")]),a._v(" "),s("li",[s("strong",[a._v("-v $PWD/data:/var/lib/mysql")]),a._v(" ：将主机当前目录下的data目录挂载到容器的 /var/lib/mysql 。数据目录")]),a._v(" "),s("li",[a._v("**-e MYSQL_ROOT_PASSWORD=123456：**初始化 root 用户的密码。")])])])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311603372.png",alt:"image-20221119204847664"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311604449.png",alt:"image-20221119205037008"}})]),a._v(" "),s("h2",{attrs:{id:"_4-2-tomcat部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-tomcat部署"}},[a._v("#")]),a._v(" 4.2 Tomcat部署")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311604857.png",alt:"image-20221119213329980"}})]),a._v(" "),s("h3",{attrs:{id:"搜索tomcat镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索tomcat镜像"}},[a._v("#")]),a._v(" 搜索tomcat镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker search tomcat\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"拉取tomcat镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取tomcat镜像"}},[a._v("#")]),a._v(" 拉取tomcat镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker pull tomcat\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311602014.png",alt:"image-20221119214222638"}})]),a._v(" "),s("h3",{attrs:{id:"创建容器-设置端口映射、目录映射-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建容器-设置端口映射、目录映射-2"}},[a._v("#")]),a._v(" 创建容器，设置端口映射、目录映射")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\n# 在/root目录下创建tomcat目录用于存储tomcat数据信息\nmkdir ~/tomcat\ncd ~/tomcat\nSHELL\ndocker run -id --name=c_tomcat \\\n-p 8080:8080 \\\n-v $PWD:/usr/local/tomcat/webapps \\\ntomcat \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("ul",[s("li",[s("p",[a._v("参数说明：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("**-p 8080:8080：**将容器的8080端口映射到主机的8080端口")]),a._v(" "),s("p",[a._v("**-v $PWD:/usr/local/tomcat/webapps：**将主机中当前目录挂载到容器的webapps")])])])])]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311604022.png",alt:"image-20221119214349524"}})]),a._v(" "),s("h3",{attrs:{id:"使用外部机器访问tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用外部机器访问tomcat"}},[a._v("#")]),a._v(" 使用外部机器访问tomcat")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311606606.png",alt:"image-20230731160651560"}})]),a._v(" "),s("h2",{attrs:{id:"_4-3-nginx部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-nginx部署"}},[a._v("#")]),a._v(" 4.3 Nginx部署")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311602382.png",alt:"image-20221119214456006"}})]),a._v(" "),s("h3",{attrs:{id:"搜索nginx镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索nginx镜像"}},[a._v("#")]),a._v(" 搜索nginx镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker search nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"拉取nginx镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取nginx镜像"}},[a._v("#")]),a._v(" 拉取nginx镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker pull nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"创建容器-设置端口映射、目录映射-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建容器-设置端口映射、目录映射-3"}},[a._v("#")]),a._v(" 创建容器，设置端口映射、目录映射")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('SHELL\n# 在/root目录下创建nginx目录用于存储nginx数据信息\nmkdir ~/nginx\ncd ~/nginx\nmkdir conf\ncd conf\n# 在~/nginx/conf/下创建nginx.conf文件,粘贴下面内容\nvim nginx.conf\nSHELL\nuser  nginx;\nworker_processes  1;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    include /etc/nginx/conf.d/*.conf;\n}\nSHELL\ndocker run -id --name=c_nginx \\\n-p 80:80 \\\n-v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf \\\n-v $PWD/logs:/var/log/nginx \\\n-v $PWD/html:/usr/share/nginx/html \\\nnginx\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br")])]),s("ul",[s("li",[a._v("参数说明：\n"),s("ul",[s("li",[s("strong",[a._v("-p 80:80")]),a._v("：将容器的 80端口映射到宿主机的 80 端口。")]),a._v(" "),s("li",[s("strong",[a._v("-v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf")]),a._v("：将主机当前目录下的 /conf/nginx.conf 挂载到容器的 :/etc/nginx/nginx.conf。配置目录")]),a._v(" "),s("li",[s("strong",[a._v("-v $PWD/logs:/var/log/nginx")]),a._v("：将主机当前目录下的 logs 目录挂载到容器的/var/log/nginx。日志目录")])])])]),a._v(" "),s("h3",{attrs:{id:"使用外部机器访问nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用外部机器访问nginx"}},[a._v("#")]),a._v(" 使用外部机器访问nginx")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311607845.png",alt:"1573652396669"}})]),a._v(" "),s("h2",{attrs:{id:"_4-4-redis部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-redis部署"}},[a._v("#")]),a._v(" 4.4 Redis部署")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311602915.png",alt:"image-20221119215440719"}})]),a._v(" "),s("h3",{attrs:{id:"搜索redis镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搜索redis镜像"}},[a._v("#")]),a._v(" 搜索redis镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker search redis\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"拉取redis镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取redis镜像"}},[a._v("#")]),a._v(" 拉取redis镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker pull redis:5.0\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"创建容器-设置端口映射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建容器-设置端口映射"}},[a._v("#")]),a._v(" 创建容器，设置端口映射")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker run -id --name=c_redis -p 6379:6379 redis:5.0\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311607572.png",alt:"image-20221119221014974"}})]),a._v(" "),s("h3",{attrs:{id:"使用外部机器连接redis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用外部机器连接redis"}},[a._v("#")]),a._v(" 使用外部机器连接redis")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\n./redis-cli.exe -h 192.168.149.135 -p 6379\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h1",{attrs:{id:"_5-dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-dockerfile"}},[a._v("#")]),a._v(" 5 Dockerfile")]),a._v(" "),s("h2",{attrs:{id:"_5-1-docker镜像原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-docker镜像原理"}},[a._v("#")]),a._v(" 5.1 Docker镜像原理")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311609956.png",alt:"image-20221120130749819"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311610467.png",alt:"image-20221120131008869"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311610032.png",alt:"image-20221120131751168"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311610627.png",alt:"image-20221120132440129"}})]),a._v(" "),s("p",[a._v("演示")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311610351.png",alt:"image-20221120133459889"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311611323.png",alt:"image-20221120133726220"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311611071.png",alt:"image-20221120133948978"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311611441.png",alt:"image-20221120134315829"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311611668.png",alt:"image-20221120134530599"}})]),a._v(" "),s("h2",{attrs:{id:"_5-2-dockerfile概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-dockerfile概念"}},[a._v("#")]),a._v(" 5.2 Dockerfile概念")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311611729.png",alt:"image-20221120134838135"}})]),a._v(" "),s("h2",{attrs:{id:"_5-3-dockerfile关键字"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-dockerfile关键字"}},[a._v("#")]),a._v(" 5.3 Dockerfile关键字")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("关键字")]),a._v(" "),s("th",[a._v("作用")]),a._v(" "),s("th",[a._v("备注")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("FROM")]),a._v(" "),s("td",[a._v("指定父镜像")]),a._v(" "),s("td",[a._v("指定dockerfile基于那个image构建")])]),a._v(" "),s("tr",[s("td",[a._v("MAINTAINER")]),a._v(" "),s("td",[a._v("作者信息")]),a._v(" "),s("td",[a._v("用来标明这个dockerfile谁写的")])]),a._v(" "),s("tr",[s("td",[a._v("LABEL")]),a._v(" "),s("td",[a._v("标签")]),a._v(" "),s("td",[a._v("用来标明dockerfile的标签 可以使用Label代替Maintainer 最终都是在docker image基本信息中可以查看")])]),a._v(" "),s("tr",[s("td",[a._v("RUN")]),a._v(" "),s("td",[a._v("执行命令")]),a._v(" "),s("td",[a._v("执行一段命令 默认是/bin/sh 格式: RUN command 或者 RUN [“command” , “param1”,”param2”]")])]),a._v(" "),s("tr",[s("td",[a._v("CMD")]),a._v(" "),s("td",[a._v("容器启动命令")]),a._v(" "),s("td",[a._v("提供启动容器时候的默认命令 和ENTRYPOINT配合使用.格式 CMD command param1 param2 或者 CMD [“command” , “param1”,”param2”]")])]),a._v(" "),s("tr",[s("td",[a._v("ENTRYPOINT")]),a._v(" "),s("td",[a._v("入口")]),a._v(" "),s("td",[a._v("一般在制作一些执行就关闭的容器中会使用")])]),a._v(" "),s("tr",[s("td",[a._v("COPY")]),a._v(" "),s("td",[a._v("复制文件")]),a._v(" "),s("td",[a._v("build的时候复制文件到image中")])]),a._v(" "),s("tr",[s("td",[a._v("ADD")]),a._v(" "),s("td",[a._v("添加文件")]),a._v(" "),s("td",[a._v("build的时候添加文件到image中 不仅仅局限于当前build上下文 可以来源于远程服务")])]),a._v(" "),s("tr",[s("td",[a._v("ENV")]),a._v(" "),s("td",[a._v("环境变量")]),a._v(" "),s("td",[a._v("指定build时候的环境变量 可以在启动的容器的时候 通过-e覆盖 格式ENV name=value")])]),a._v(" "),s("tr",[s("td",[a._v("ARG")]),a._v(" "),s("td",[a._v("构建参数")]),a._v(" "),s("td",[a._v("构建参数 只在构建的时候使用的参数 如果有ENV 那么ENV的相同名字的值始终覆盖arg的参数")])]),a._v(" "),s("tr",[s("td",[a._v("VOLUME")]),a._v(" "),s("td",[a._v("定义外部可以挂载的数据卷")]),a._v(" "),s("td",[a._v("指定build的image那些目录可以启动的时候挂载到文件系统中 启动容器的时候使用 -v 绑定 格式 VOLUME [“目录”]")])]),a._v(" "),s("tr",[s("td",[a._v("EXPOSE")]),a._v(" "),s("td",[a._v("暴露端口")]),a._v(" "),s("td",[a._v("定义容器运行的时候监听的端口 启动容器的使用-p来绑定暴露端口 格式: EXPOSE 8080 或者 EXPOSE 8080/udp")])]),a._v(" "),s("tr",[s("td",[a._v("WORKDIR")]),a._v(" "),s("td",[a._v("工作目录")]),a._v(" "),s("td",[a._v("指定容器内部的工作目录 如果没有创建则自动创建 如果指定/ 使用的是绝对地址 如果不是/开头那么是在上一条workdir的路径的相对路径")])]),a._v(" "),s("tr",[s("td",[a._v("USER")]),a._v(" "),s("td",[a._v("指定执行用户")]),a._v(" "),s("td",[a._v("指定build或者启动的时候 用户 在RUN CMD ENTRYPONT执行的时候的用户")])]),a._v(" "),s("tr",[s("td",[a._v("HEALTHCHECK")]),a._v(" "),s("td",[a._v("健康检查")]),a._v(" "),s("td",[a._v("指定监测当前容器的健康监测的命令 基本上没用 因为很多时候 应用本身有健康监测机制")])]),a._v(" "),s("tr",[s("td",[a._v("ONBUILD")]),a._v(" "),s("td",[a._v("触发器")]),a._v(" "),s("td",[a._v("当存在ONBUILD关键字的镜像作为基础镜像的时候 当执行FROM完成之后 会执行 ONBUILD的命令 但是不影响当前镜像 用处也不怎么大")])]),a._v(" "),s("tr",[s("td",[a._v("STOPSIGNAL")]),a._v(" "),s("td",[a._v("发送信号量到宿主机")]),a._v(" "),s("td",[a._v("该STOPSIGNAL指令设置将发送到容器的系统调用信号以退出。")])]),a._v(" "),s("tr",[s("td",[a._v("SHELL")]),a._v(" "),s("td",[a._v("指定执行脚本的shell")]),a._v(" "),s("td",[a._v("指定RUN CMD ENTRYPOINT 执行命令的时候 使用的shell")])])])]),a._v(" "),s("h2",{attrs:{id:"_5-4-dockerfile案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-dockerfile案例"}},[a._v("#")]),a._v(" 5.4 Dockerfile案例")]),a._v(" "),s("h3",{attrs:{id:"案例1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#案例1"}},[a._v("#")]),a._v(" 案例1")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311612673.png",alt:"img"}})]),a._v(" "),s("p",[a._v("准备好springboot jar包并传至宿主机的根目录")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311612226.png",alt:"image-20221120164903532"}})]),a._v(" "),s("p",[a._v("创建docker-files目录，并把jar包移动进去")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311612411.png",alt:"image-20221120165116968"}})]),a._v(" "),s("p",[a._v("创建dockerfile文件并编辑")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\nFROM java:8\nMAINTAINER itheima <itheima@itcast.cn>\nADD HelloDocker-0.0.1-SNAPSHOT.jar app.jar\nCMD java -jar app.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("根据dockerfile制作镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("PLAINTEXT\ndocker build -f ./springboot_dockerfile -t app .\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311613420.png",alt:"image-20221120170212253"}})]),a._v(" "),s("p",[a._v("启动并做端口映射")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker run -id -p 9000:8080 app\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311613084.png",alt:"image-20221120170509684"}})]),a._v(" "),s("p",[a._v("成功访问")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311613650.png",alt:"image-20221120170920994"}})]),a._v(" "),s("h3",{attrs:{id:"案例2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#案例2"}},[a._v("#")]),a._v(" 案例2")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311614587.png",alt:"img"}})]),a._v(" "),s("p",[a._v("编辑dockerfile文件")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\n[root@hecs-33111 docker-files]# vim centos_dockerfile\nBASH\nFROM centos:7\nMAINTAINER itheima<itheima@itcast.cn>\nRUN yum install -y vim\nWORKDIR /usr\nCMD /bin/bash\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("构建镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\n[root@hecs-33111 docker-files]# docker build -f centos_dockerfile -t itheima_centos:1 .\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311614962.png",alt:"image-20221120174043683"}})]),a._v(" "),s("p",[a._v("创建容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\ndocker run -it --name=c5 itheima_centos:1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311615055.png",alt:"image-20221120174230249"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311615021.png",alt:"image-20221120174417280"}})]),a._v(" "),s("h1",{attrs:{id:"_6-docker服务编排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-docker服务编排"}},[a._v("#")]),a._v(" 6 Docker服务编排")]),a._v(" "),s("h2",{attrs:{id:"_6-1-服务编排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-服务编排"}},[a._v("#")]),a._v(" 6.1 服务编排")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311618651.png",alt:"image-20221120174617528"}})]),a._v(" "),s("h2",{attrs:{id:"_6-2-docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-docker-compose"}},[a._v("#")]),a._v(" 6.2 Docker Compose")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311618019.png",alt:"image-20221120174712386"}})]),a._v(" "),s("h2",{attrs:{id:"_6-3-docker-compose-安装使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-docker-compose-安装使用"}},[a._v("#")]),a._v(" 6.3 Docker Compose 安装使用")]),a._v(" "),s("h3",{attrs:{id:"一、安装docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、安装docker-compose"}},[a._v("#")]),a._v(" 一、安装Docker Compose")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# Compose目前已经完全支持Linux、Mac OS和Windows，在我们安装Compose之前，需要先安装Docker。下面我 们以编译好的二进制包方式安装在Linux系统中。 \ncurl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n# 设置文件可执行权限 \nchmod +x /usr/local/bin/docker-compose\n# 查看版本信息 \ndocker-compose -version\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311619509.png",alt:"image-20221120181950479"}})]),a._v(" "),s("h3",{attrs:{id:"二、卸载docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、卸载docker-compose"}},[a._v("#")]),a._v(" 二、卸载Docker Compose")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 二进制包方式安装的，删除二进制文件即可\nrm /usr/local/bin/docker-compose\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"三、-使用docker-compose编排nginx-springboot项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、-使用docker-compose编排nginx-springboot项目"}},[a._v("#")]),a._v(" 三、 使用docker compose编排nginx+springboot项目")]),a._v(" "),s("ol",[s("li",[a._v("创建docker-compose目录")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\nmkdir ~/docker-compose\ncd ~/docker-compose\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("编写 docker-compose.yml 文件")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\nversion: '3'\nservices:\n  nginx:\n   image: nginx\n   ports:\n    - 80:80\n   links:\n    - app\n   volumes:\n    - ./nginx/conf.d:/etc/nginx/conf.d\n  app:\n    image: app\n    expose:\n      - \"8080\"\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311619983.png",alt:"image-20221120182206246"}})]),a._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[a._v("创建./nginx/conf.d目录")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("SHELL\nmkdir -p ./nginx/conf.d\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311619240.png",alt:"image-20221120182309055"}})]),a._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[a._v("在./nginx/conf.d目录下 编写itheima.conf文件")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("server {\n    listen 80;\n    access_log off;\n\n    location / {\n        proxy_pass http://app:8080;\n    }\n   \n}\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311622583.png",alt:"image-20221120182520017"}})]),a._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[a._v("在~/docker-compose 目录下 使用docker-compose 启动容器")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker-compose up\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311622343.png",alt:"image-20221120182758615"}})]),a._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[a._v("测试访问")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("http://192.168.149.135/hello\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311622311.png",alt:"image-20221120182940496"}})]),a._v(" "),s("h1",{attrs:{id:"_7-docker私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-docker私有仓库"}},[a._v("#")]),a._v(" 7 Docker私有仓库")]),a._v(" "),s("h3",{attrs:{id:"一、-私有仓库搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、-私有仓库搭建"}},[a._v("#")]),a._v(" 一、 私有仓库搭建")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311626627.png",alt:"image-20221120183254474"}})]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 1、拉取私有仓库镜像 \ndocker pull registry\n# 2、启动私有仓库容器 \ndocker run -id --name=registry -p 5000:5000 registry\n# 3、打开浏览器 输入地址http://私有仓库服务器ip:5000/v2/_catalog，看到{"repositories":[]} 表示私有仓库 搭建成功\n# 4、修改daemon.json   \nvim /etc/docker/daemon.json    \n# 在上述文件中添加一个key，保存退出。此步用于让 docker 信任私有仓库地址；注意将私有仓库服务器ip修改为自己私有仓库服务器真实ip \n{"insecure-registries":["私有仓库服务器ip:5000"]} \n# 5、重启docker 服务 \nsystemctl restart docker\ndocker start registry\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311626507.png",alt:"image-20221120201936298"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311627391.png",alt:"image-20221120202727139"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311627647.png",alt:"image-20221120203058041"}})]),a._v(" "),s("h3",{attrs:{id:"二、将镜像上传至私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、将镜像上传至私有仓库"}},[a._v("#")]),a._v(" 二、将镜像上传至私有仓库")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 1、标记镜像为私有仓库的镜像     \ndocker tag centos:7 私有仓库服务器IP:5000/centos:7\n \n# 2、上传标记的镜像     \ndocker push 私有仓库服务器IP:5000/centos:7\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311627657.png",alt:""}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311628958.png",alt:"image-20221120204528268"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311629545.png",alt:"image-20221120204549966"}})]),a._v(" "),s("h3",{attrs:{id:"三、-从私有仓库拉取镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、-从私有仓库拉取镜像"}},[a._v("#")]),a._v(" 三、 从私有仓库拉取镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("#拉取镜像 \ndocker pull 私有仓库服务器ip:5000/centos:7\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311629448.png",alt:"image-20221120204927944"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311629827.png",alt:"image-20221120205000360"}})]),a._v(" "),s("h1",{attrs:{id:"_8-docker-相关观念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-docker-相关观念"}},[a._v("#")]),a._v(" 8 Docker 相关观念")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311630567.png",alt:"image-20221120205141989"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.staticaly.com/gh/858715831/image-hosting@main/blog/operations/docker/202307311630775.png",alt:"image-20221120205344250"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);